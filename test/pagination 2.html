<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pagination with Ellipses</title>
    <style>
      .pagination {
        display: flex;
        justify-content: center;
        margin: 10px 0;
      }
      .pagination button {
        margin: 0 5px;
        background: none;
        border: none;
        color: blue;
        cursor: pointer;
      }
      .pagination .disabled {
        color: gray;
        cursor: default;
      }
      .pagination .active {
        font-weight: bold;
      }
      .pagination .ellipsis {
        color: gray;
        cursor: default;
      }
      .items {
        list-style: none;
        padding: 0;
      }
      .items li {
        padding: 10px;
        border: 1px solid #ddd;
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <ul class="items" id="itemList"></ul>

    <div class="pagination" id="pagination"></div>

    <script>
      // Array representing items to paginate
      const items = [
        "Item 1",
        "Item 2",
        "Item 3",
        "Item 4",
        "Item 5",
        "Item 6",
        "Item 7",
        "Item 8",
        "Item 9",
        "Item 10",
        "Item 11",
        "Item 12",
        "Item 13",
        "Item 14",
        "Item 15",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 20",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 25",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 30",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 35",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 40",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 45",
        "Item 16",
        "Item 17",
        "Item 18",
        "Item 19",
        "Item 50",
      ];

      const itemsPerPage = 5;
      let currentPage = 1;

      // Function to display items for the current page
      function displayItems(page) {
        const startIndex = (page - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, items.length);
        const itemsToDisplay = items.slice(startIndex, endIndex);

        const itemList = document.getElementById("itemList");
        itemList.innerHTML = "";
        itemsToDisplay.forEach((item) => {
          const listItem = document.createElement("li");
          listItem.textContent = item;
          itemList.appendChild(listItem);
        });
      }

      // Function to create pagination controls
      function createPagination() {
        const totalPages = Math.ceil(items.length / itemsPerPage);
        const pagination = document.getElementById("pagination");
        pagination.innerHTML = "";

        // Function to create a page button
        const createPageButton = (page) => {
          const pageButton = document.createElement("button");
          pageButton.textContent = page;
          pageButton.className = currentPage === page ? "active" : "";
          pageButton.addEventListener("click", () => {
            currentPage = page;
            updatePagination();
          });
          pagination.appendChild(pageButton);
        };

        // Function to create the previous button
        const createPreviousButton = () => {
          const prevButton = document.createElement("button");
          prevButton.textContent = "Previous";
          prevButton.className = currentPage === 1 ? "disabled" : "";
          prevButton.addEventListener("click", () => {
            if (currentPage > 1) {
              currentPage -= 1;
              updatePagination();
            }
          });
          pagination.appendChild(prevButton);
        };

        // Function to create the next button
        const createNextButton = () => {
          const nextButton = document.createElement("button");
          nextButton.textContent = "Next";
          nextButton.className = currentPage === totalPages ? "disabled" : "";
          nextButton.addEventListener("click", () => {
            if (currentPage < totalPages) {
              currentPage += 1;
              updatePagination();
            }
          });
          pagination.appendChild(nextButton);
        };

        // Create pagination buttons with ellipsis when required
        createPreviousButton();

        createPageButton(1); // Always display the first page
        createPageButton(2);

        if (totalPages > 4) {
          createPageButton(3); // Display the second page

          // Insert ellipsis if there's a large gap
          if (currentPage > 3) {
            const ellipsis = document.createElement("span");
            ellipsis.textContent = "...";
            ellipsis.className = "ellipsis";
            pagination.appendChild(ellipsis);
          }

          // Display the current page if it's beyond the first two pages
          if (currentPage >= 4 && currentPage < totalPages) {
            createPageButton(currentPage);
            if (currentPage < totalPages - 1) {
              createPageButton(currentPage + 1); // Display the current page
            }
          }

          // Insert ellipsis if needed before the last page
          if (currentPage < totalPages - 1) {
            const ellipsis = document.createElement("span");
            ellipsis.textContent = "...";
            ellipsis.className = "ellipsis";
            pagination.appendChild(ellipsis);
          }

          // Always display the last page
          createPageButton(totalPages);
        } else {
          // If total pages are 3 or fewer, show all pages
          for (let i = 2; i <= totalPages; i++) {
            createPageButton(i);
          }
        }

        createNextButton(); // Add next button at the end
      }

      // Function to update the displayed items and pagination controls
      function updatePagination() {
        displayItems(currentPage);
        createPagination();
      }

      updatePagination(); // Initialize the pagination
    </script>
  </body>
</html>
